---
interface Props {
  user?: { username: string; is_admin?: boolean } | null;
}
 
const { user } = Astro.props;
---
 
<header class="site-header">
  <div class="header-left">
    <a href="/"><img class="logo" src="../pictures/betaiconJustb.webp" alt="Beta-code logo"></a>
    <h1 class="logo-name">
      <a href="/" class="logo-name">eta-code</a>
    </h1>
  </div>
  <nav class="site-nav">
    <a href="/">Home</a>
    <a href="/play">Tasks</a>
    <a href="/leaderboard">Leaderboard</a>
    {user?.is_admin && <a href="/admin">Admin Panel</a>}
    {user ? (
      <span class="user-info">
        <span class="username">{user.username}</span>
        <button id="logoutBtn" class="logout-btn">Logout</button>
      </span>
    ) : (
      <a href="/auth">Login</a>
    )}
    
  </nav>
</header>
 
<script>
  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', async () => {
      await fetch('/api/logout', { method: 'POST' });
      window.location.reload();
    });
  }
</script>
 
<style>
  .user-info {
    display: flex;
    align-items: center;
    gap: 12px;
  }
 
  .username {
    color: var(--beta-blue);
    font-weight: 600;
  }
 
  .logout-btn {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--small-text);
    border-radius: 6px;
    color: var(--small-text);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
 
  .logout-btn:hover {
    border-color: var(--beta-blue);
    color: var(--beta-blue);
  }

  .logo-name {
    text-decoration: none;
    color: inherit; 
  }
</style>